<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Denner Evaldt Machado.">
    <title>Portal do Conhecimento - @ViewBag.title</title>

    <!-- Favicon -->
    <link href="@Url.Content("~/Content/images/favicon.png")" rel="icon">

    <!-- Css -->
    @Styles.Render("~/Content/bootstrap.css")
    @Styles.Render("~/Content/home.css")
    @Scripts.Render("~/bundles/modernizr")

    <!-- Angular JS-->
    @Scripts.Render("~/Scripts/angular.js")
    @Scripts.Render("~/Scripts/app.js")
    @Scripts.Render("~/Scripts/controllers.js")
    @Scripts.Render("~/Scripts/factories.js")

    @{
        HttpCookie userInfo = Request.Cookies["userInfo"];
        var fName = Server.UrlTokenDecode(userInfo["first_name"]);
        string first_name = System.Text.UTF8Encoding.UTF8.GetString(fName);

        var lName = Server.UrlTokenDecode(userInfo["last_name"]);
        string last_name = System.Text.UTF8Encoding.UTF8.GetString(lName);
        
        var accTp = Server.UrlTokenDecode(userInfo["account_type"]);
        string account_type = System.Text.UTF8Encoding.UTF8.GetString(accTp);
        
        HttpCookie cookie_image = Request.Cookies["userImage"];
        var decValue = Server.UrlTokenDecode(cookie_image.Value);
        string url_image = System.Text.UTF8Encoding.UTF8.GetString(decValue);
    }

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/4.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1..2/respond.min.js"></script>
    <![endif]-->
</head>
<body ng-app="homePortal">
    <!-- Fixed navbar -->
    <nav class="navbar navbar-default navbar-fixed-top font-light">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a href="#menu-toggle" class="navbar-brand" id="menu-toggle">
                    <span class="glyphicon glyphicon-indent-left"></span>
                </a>
                <p class="navbar-text">PORTAL DO CONHECIMENTO</p>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown" style="border-left: 1px solid #e2e9e6; border-right: 1px solid #e2e9e6;">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
                            <img src="@url_image" alt="Image" class="img-navbar" /> @first_name <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu" role="menu">
                            <li><a href="#" data-toggle="modal" data-target=".invite-friends">Convidar amigos</a></li>
                            <li class="divider"></li>
                            <li class="dropdown-header">Conta</li>
                            <li><a href="/account/manage">Gerenciar</a></li>
                            <li><a href="/account/logoff">Sair</a></li>
                        </ul>
                    </li>
                </ul>
            </div><!--/.nav-collapse -->
        </div>
    </nav>
    <div id="wrapper" class="">
        <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <div class="sidebar-brand">
                <a href="#">
                    <img src="@url_image" alt="Image" class="img-circle">
                </a>
                <h4 class="sidebar-heading">@first_name @last_name</h4>
            </div>
            <ul class="sidebar-nav">
                <li class="sidebar-heading-li">MENU</li>
                
                @if (account_type != "T")
                {
                    <li>
                        <a href="#"><span class="glyphicon glyphicon-user margin-rght"></span> Professores</a>
                    </li>
                    <li>
                        <a href="#"><span class="glyphicon glyphicon-duplicate margin-rght"></span> Atividades <span class="badge">0</span></a>
                    </li>
                    <li>
                        <a href="#"><span class="glyphicon glyphicon-envelope margin-rght"></span> Mensagens <span class="badge">0</span></a>
                    </li>
                }
                <li>
                    <a href="#"><span class="glyphicon glyphicon-star margin-rght"></span> Estrelinhas</a>
                </li>
                
                @if (account_type == "T")
                {
                    <li>
                        <a href="#" data-toggle="modal" data-target=".disciplines"><span class="glyphicon glyphicon-book margin-rght"></span> Disciplinas</a>
                    </li>
                    <li>
                        <a href="#" data-toggle="modal" data-target=".classes"><span class="glyphicon glyphicon-folder-open margin-rght"></span> Turmas</a>
                    </li>
                    <li>
                        <a href="#"><span class="glyphicon glyphicon-envelope margin-rght"></span> Mensagens </a>
                    </li>
                }
                
            </ul>
        </div>
        <!-- /#sidebar-wrapper -->
        <!-- Page Content -->
        @RenderBody()
        <!-- /#page-content-wrapper -->
        <!-- Page-content-wrapper-right -->
        <div id="wrapper-right" class="toggled">
            <div id="sidebar-wrapper-right">
                <div id="page-content-wrapper-right">
                    <div class="container-wrapper-right">
                        <div class="row">
                            <div class="col-md-12 border-b">
                                <h4>Notas</h4>
                                <div class="panel panel-default">
                                    <div class="panel-body">
                                        <textarea class="form-control share-text" name="anottation" id="anottation" rows="4" placeholder="Digite aqui..."></textarea>
                                    </div>
                                </div>
                                <button class="btn btn-block btn-default">Salvar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- /Page-content-wrapper-right -->

        <!-- Modal Invite-Friends -->
        <div class="modal fade invite-friends" ng-controller="InviteFriendsController">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form method="post" id="inviteForm" name="inviteForm" ng-submit="submit(inviteForm)">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title-custom">Convidar amigo</h4>
                        </div>
                        <div class="modal-body">

                            <div class="form-group" ng-class="{ 'has-error has-feedback': inviteForm.inputEmail.$dirty && inviteForm.inputEmail.$error.email }">
                                <label for="inputEmail">Email</label>
                                <input type="email" class="form-control" id="inputEmail" name="inputEmail" ng-model="Account.email" placeholder="Email" required />
                                <p class="bg-danger" ng-show="inviteForm.inputEmail.$error.email">
                                    Email inválido.
                                </p>
                            </div>
                            <div class="text-center">
                                <img class="img-loading" src="@Url.Content("~/Content/images/loader.gif")" alt="Loading" ng-show="loading" />
                            </div>

                            <div ng-class="result">{{ resultMessage }}</div>
                        </div>
                        <div class="modal-footer">
                            <button type="submit" class="btn btn-primary">Enviar convite</button>
                        </div>
                    </form>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->

        <!-- Modal Disciplines -->
        <div class="modal fade disciplines" ng-controller="DisciplinesController">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">

                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title-custom">Disciplinas</h4>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div role="tabpanel" style="margin-right:15px;margin-left:15px;">

                                <!-- Nav tabs -->
                                <ul class="nav nav-tabs" role="tablist">
                                    <li role="presentation" class="active"><a href="#cadastrar" aria-controls="home" role="tab" data-toggle="tab">Cadastrar</a></li>
                                    <li role="presentation"><a href="#minhasdisciplinas" aria-controls="messages" role="tab" data-toggle="tab">Minhas Disciplinas</a></li>
                                </ul>

                                <!-- Tab panes -->
                                <div class="tab-content">
                                    <div role="tabpanel" class="tab-pane active" id="cadastrar">

                                        @Html.Partial("~/Views/disciplines/create.cshtml")

                                    </div>

                                    <div role="tabpanel" class="tab-pane" id="minhasdisciplinas">

                                        @Html.Partial("~/Views/disciplines/mydisciplines.cshtml")

                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->

        <!-- Modal Classes -->
        <div class="modal fade classes" ng-controller="ClassesController">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title-custom">Turmas</h4>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div role="tabpanel" style="margin-right:15px;margin-left:15px;">

                                <!-- Nav tabs -->
                                <ul class="nav nav-tabs" role="tablist">
                                    <li role="presentation" class="active"><a href="#cadastrarClass" aria-controls="home" role="tab" data-toggle="tab">Cadastrar</a></li>
                                    <li role="presentation"><a href="#minhasturmas" aria-controls="messages" role="tab" data-toggle="tab">Minhas turmas</a></li>
                                </ul>

                                <!-- Tab panes -->
                                <div class="tab-content">
                                    <div role="tabpanel" class="tab-pane active" id="cadastrarClass">

                                        @Html.Partial("~/Views/classes/create.cshtml")

                                    </div>

                                    <div role="tabpanel" class="tab-pane" id="minhasturmas">

                                        @Html.Partial("~/Views/classes/myclasses.cshtml")

                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->
    </div>
    <!-- /#wrapper -->
    <!-- jQuery -->
    <script src="@Scripts.Url("~/Scripts/jquery.js")"></script>

    <!-- Menu Toggle Script -->
    <script>
        $(document).ready(function () {

            $("[data-toggle=popover]").popover();

        if (screen.width < 768){
          $("#menu-toggle").toggleClass("visibility-visible");
          $("#wrapper-right").toggleClass("toggled");
        }
        else{
          $("#menu-toggle").toggleClass("visibility-collapse");
          $("#wrapper").toggleClass("toggled");
        }
      })

      $("#menu-toggle").click(function(e) {
          e.preventDefault();
          $("#wrapper").toggleClass("toggled");
      });
    </script>

    @Scripts.Render("~/bundles/bootstrap")
    @RenderSection("scripts", required: false)

</body>
</html>
